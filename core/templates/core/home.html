{%load static%}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AADHAAR SSO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script>
    <script src="{% static 'js/across-tabs.js'%}"></script>
    <style>
        body {
            color: #5a5a5a;
        }
        .carousel {
            margin-bottom: 4rem;
        }
        .carousel-caption {
            bottom: 3rem;
            z-index: 10;
        }
        .carousel-item {
            height: 32rem;
        }
        .carousel-item>img {
            position: absolute;
            top: 0;
            left: 0;
            min-width: 100%;
            height: 32rem;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light sticky-top" style="background-color: #ffffff;">
        <div class="container-fluid">
            <a class="navbar-brand" href="{%url 'home'%}">
                <img src="{%static 'images/logo.svg'%}" width="30" height="30" class="d-inline-block align-top" alt="">
                AADHAAR SSO
            </a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="{%url 'home'%}">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{%url 'dashboard'%}">Domain User</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <main role="main">
        <div id="myCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class=""
                    aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"
                    class=""></button>
                <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"
                    class="active" aria-current="true"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active" style="background-image: url('{%static 'images/aadhaar-1.jpg'%}'); background-position: center; background-repeat: no-repeat; background-size: cover;">
                    <div class="container">
                        <div class="carousel-caption text-start">
                            <h1 class="text-dark">AADHAAR SSO</h1>
                            <p class="text-dark">Use AADHAAR to manage all your authentication needs.</p>
                            <p><a class="btn btn-lg btn-primary" href="{%url 'vid'%}">Get VID Now »</a></p>
                        </div>
                    </div>
                </div>
                <div class="carousel-item" style="background-image: url('{%static 'images/aadhaar.jpg'%}'); background-position: center; background-repeat: no-repeat; background-size: cover;">
                    <div class="container">
                        <div class="carousel-caption text-end">
                            <h1 class="text-dark">Website Owner?</h1>
                            <p class="text-dark">Get your website AADHAAR ready now.</p>
                            <p><a class="btn btn-lg btn-primary" href="{%url 'dashboard'%}">DOMAIN REGISTRAR »</a></p>
                        </div>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>

        <div class="modal fade" id="modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modaltitle">Message Modal</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id='modalbody'>
                        Message Body?
                    </div>
                    <div class="modal-footer">
                        <div id="modalbutton">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
                            <button type="button" class="btn btn-primary" id>Yes</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>
        var objQueryString = {};
        function getParameterByName(name = "") {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }

        function removeQString(key) {
            var urlValue = document.location.href;
            var searchUrl = location.search;//Get query string value
            if (key != "") {
                oldValue = getParameterByName(key);
                removeVal = key + "=" + oldValue;
                if (searchUrl.indexOf('?' + removeVal + '&') != "-1") {
                    urlValue = urlValue.replace('?' + removeVal + '&', '?');
                }
                else if (searchUrl.indexOf('&' + removeVal + '&') != "-1") {
                    urlValue = urlValue.replace('&' + removeVal + '&', '&');
                }
                else if (searchUrl.indexOf('?' + removeVal) != "-1") {
                    urlValue = urlValue.replace('?' + removeVal, '');
                }
                else if (searchUrl.indexOf('&' + removeVal) != "-1") {
                    urlValue = urlValue.replace('&' + removeVal, '');
                }
            }
            else {
                var searchUrl = location.search;
                urlValue = urlValue.replace(searchUrl, '');
            }
            history.replaceState({ state: 1, rand: Math.random() }, '', urlValue);
        }

        function changeUrl(key, value) {
            var searchUrl = location.search;  //Get query string value
            if (searchUrl.indexOf("?") == "-1") {
                var urlValue = '?' + key + '=' + value;
                history.pushState({ state: 1, rand: Math.random() }, '', urlValue);
            }
            else {  //Check for key in query string, if not present
                if (searchUrl.indexOf(key) == "-1") {
                    var urlValue = searchUrl + '&' + key + '=' + value;
                }
                else {	//If key present in query string
                    oldValue = getParameterByName(key);
                    if (searchUrl.indexOf("?" + key + "=") != "-1") {
                        urlValue = searchUrl.replace('?' + key + '=' + oldValue, '?' + key + '=' + value);
                    }
                    else {
                        urlValue = searchUrl.replace('&' + key + '=' + oldValue, '&' + key + '=' + value);
                    }
                }
                history.replaceState({ state: 1, rand: Math.random() }, '', urlValue);
            }
            objQueryString.key = value;
        }
        messages = {
            '0': {
                'head': 'SSO Error: Unauthorized Parent',
                'body': 'The SSO cannot be accessed as a standalone application.',
                'button': `<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Okay</button>`
            },
        }
        function getModal(a) {
            console.log(a);
            var modal = new bootstrap.Modal(document.getElementById('modal'))
            modalhead = document.getElementById('modaltitle');
            modalbody = document.getElementById('modalbody');
            modalbutton = document.getElementById('modalbutton');
            modalhead.innerHTML = messages[a]['head'];
            modalbody.innerHTML = messages[a]['body'];
            modalbutton.innerHTML = messages[a]['button'];
            // modalbutton.innerHTML = '<a href="' + url + '" class="btn btn-primary" id>Confirm</button>';
            modal.show()
        }

        function showMessage() {
            url = new URL(window.location.href);
            a = url.searchParams.get('message');
            if (a) {
                getModal(a);
                console.log(a);
            }
            removeQString('message')
        }
        window.addEventListener('load', showMessage);
    </script>
</body>

</html>